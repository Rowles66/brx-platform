# ðŸš€ BRX Platform Database Setup Guide

This guide will help you set up Supabase and Upstash for the BRX Platform project, continuing from where we left off.

## 1. Set Up Supabase

1. **Create or access your Supabase project**:
   - Go to [supabase.com](https://supabase.com) and sign in
   - Create a new project or use your existing one
   - Once created, go to Project Settings > API to get your credentials

2. **Get your Supabase credentials**:
   - **Project URL**: `https://[YOUR-PROJECT-ID].supabase.co`
   - **API Keys**: Copy both the `anon` public key and the `service_role` key
   - **Database Connection**: From the Database settings, get your PostgreSQL connection string

## 2. Set Up Upstash Redis

1. **Create an Upstash Redis database**:
   - Go to [console.upstash.com](https://console.upstash.com/) and sign up/in
   - Create a new Redis database
   - Choose a name (e.g., `brx-cache`) and select the region closest to your users
   - Select the free tier for development

2. **Get your Upstash credentials**:
   - After creating the database, go to the "REST API" section
   - Copy the `UPSTASH_REDIS_REST_URL` and `UPSTASH_REDIS_REST_TOKEN`

## 3. Configure Environment Variables

Run the setup script to create the `.env.local` file in the v0-recreate-visual-design directory:

```bash
./setup-env.sh
```

Then edit the `.env.local` file in the v0-recreate-visual-design directory to add your actual credentials:

```
# BRX Platform Environment Variables
# Copy this file to .env.local and fill in your actual values

# === Database Configuration ===
# Supabase PostgreSQL connection strings
DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-ID].supabase.co:5432/postgres"
DIRECT_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-ID].supabase.co:5432/postgres"

# === Supabase API ===
SUPABASE_URL="https://[YOUR-PROJECT-ID].supabase.co"
SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# === Redis Caching ===
# Upstash Redis for caching and queues
UPSTASH_REDIS_REST_URL="https://[YOUR-INSTANCE].upstash.io"
UPSTASH_REDIS_REST_TOKEN="AXXXa..."

# === Authentication ===
NEXTAUTH_SECRET="generate-a-secure-random-string-here"
NEXTAUTH_URL="http://localhost:3000"

# === External APIs ===
# Exercise.com API for data migration
EXERCISE_COM_API_TOKEN="Bearer your-exercise-com-token"

# === Testing Credentials ===
# For E2E testing
BRX_USERNAME="test@example.com"
BRX_PASSWORD="test-password"

# === AI Services (Optional) ===
OPENAI_API_KEY="sk-..."

# === Application Settings ===
NODE_ENV="development"
BASE_URL="http://localhost:3000"

# === Feature Flags ===
ENABLE_ANALYTICS="false"
ENABLE_DEBUG_MODE="true"
```

## 4. Install Dependencies

Navigate to the v0-recreate-visual-design directory and install the required dependencies:

```bash
cd ../v0-recreate-visual-design
npm install @supabase/supabase-js @upstash/redis prisma @prisma/client tsx --legacy-peer-deps
```

## 5. Set Up the Database

Generate the Prisma client:

```bash
cd ../v0-recreate-visual-design
npx prisma generate
```

Push the schema to your Supabase database:

```bash
npx prisma db push
```

Seed the database with initial data:

```bash
npx tsx prisma/seed.ts
```

## 6. Start the Development Server

Start the Next.js development server:

```bash
npm run dev
```

Visit [http://localhost:3000](http://localhost:3000) to see your application with the integrated database.

## 7. Verify Integration

Check that your application is correctly connected to Supabase and Upstash:

1. Navigate to the dashboard page
2. Verify that the stats are loading from the database
3. Check the browser console for any connection errors

## Next Steps

1. Implement authentication using Supabase Auth
2. Create API endpoints for Exercise.com data
3. Set up caching for frequently accessed data using Upstash
4. Implement real-time features using Supabase subscriptions

If you encounter any issues during setup, please check the Supabase and Upstash documentation or reach out for assistance. 